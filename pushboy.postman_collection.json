{
	"info": {
		"_postman_id": "pushboy-api-collection",
		"name": "Pushboy API",
		"description": "Push notification service API for topic-based and user-focused notifications.\n\nFeatures:\n- Unified notification payload that works across APNs (iOS) and FCM (Android)\n- Rich notifications: images, sounds, badges, custom data\n- Silent/background notifications for app-side data sync\n- Scalable async pipeline with parallel senders\n- Notification grouping, collapsing, and priority controls",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"variable": [
		{
			"key": "baseUrl",
			"value": "http://localhost:8080",
			"type": "string"
		},
		{
			"key": "userID",
			"value": "550e8400-e29b-41d4-a716-446655440000",
			"type": "string"
		},
		{
			"key": "topicID",
			"value": "topic:announcements",
			"type": "string"
		},
		{
			"key": "tokenID",
			"value": "",
			"type": "string"
		},
		{
			"key": "jobID",
			"value": "",
			"type": "string"
		}
	],
	"item": [
		{
			"name": "Health",
			"item": [
				{
					"name": "Ping",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/v1/ping",
							"host": ["{{baseUrl}}"],
							"path": ["v1", "ping"]
						},
						"description": "Health check endpoint"
					},
					"response": []
				}
			]
		},
		{
			"name": "Users",
			"item": [
				{
					"name": "Create User",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"id\": \"550e8400-e29b-41d4-a716-446655440000\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/v1/users",
							"host": ["{{baseUrl}}"],
							"path": ["v1", "users"]
						},
						"description": "Create a new user with an optional ID. If no ID is provided, a UUID will be auto-generated."
					},
					"response": []
				},
				{
					"name": "Create User (auto-generate ID)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{}"
						},
						"url": {
							"raw": "{{baseUrl}}/v1/users",
							"host": ["{{baseUrl}}"],
							"path": ["v1", "users"]
						},
						"description": "Create a new user with an auto-generated UUID."
					},
					"response": []
				},
				{
					"name": "Get User",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/v1/users/{{userID}}",
							"host": ["{{baseUrl}}"],
							"path": ["v1", "users", "{{userID}}"]
						},
						"description": "Get a user by ID"
					},
					"response": []
				},
				{
					"name": "Delete User",
					"request": {
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/v1/users/{{userID}}",
							"host": ["{{baseUrl}}"],
							"path": ["v1", "users", "{{userID}}"]
						},
						"description": "Delete a user (cascades to tokens and subscriptions)"
					},
					"response": []
				}
			]
		},
		{
			"name": "Tokens",
			"item": [
				{
					"name": "Register Token (with user ID)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"id\": \"550e8400-e29b-41d4-a716-446655440000\",\n    \"platform\": \"apns\",\n    \"token\": \"device_token_ios_123\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/v1/users/tokens",
							"host": ["{{baseUrl}}"],
							"path": ["v1", "users", "tokens"]
						},
						"description": "Register a device token. Creates the user if they don't exist. If user exists, adds the token as a new device."
					},
					"response": []
				},
				{
					"name": "Register Token (auto-generate user ID)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"platform\": \"fcm\",\n    \"token\": \"device_token_android_456\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/v1/users/tokens",
							"host": ["{{baseUrl}}"],
							"path": ["v1", "users", "tokens"]
						},
						"description": "Register a device token with auto-generated user ID. Returns the new user and token."
					},
					"response": []
				},
				{
					"name": "Register Additional Device",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"id\": \"550e8400-e29b-41d4-a716-446655440000\",\n    \"platform\": \"fcm\",\n    \"token\": \"second_device_token_789\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/v1/users/tokens",
							"host": ["{{baseUrl}}"],
							"path": ["v1", "users", "tokens"]
						},
						"description": "Register another device for an existing user (same user ID, different token)"
					},
					"response": []
				},
				{
					"name": "Get User Tokens",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/v1/users/{{userID}}/tokens",
							"host": ["{{baseUrl}}"],
							"path": ["v1", "users", "{{userID}}", "tokens"]
						},
						"description": "Get all tokens registered for a user"
					},
					"response": []
				},
				{
					"name": "Delete Token",
					"request": {
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/v1/users/{{userID}}/tokens/{{tokenID}}",
							"host": ["{{baseUrl}}"],
							"path": ["v1", "users", "{{userID}}", "tokens", "{{tokenID}}"]
						},
						"description": "Delete a specific token"
					},
					"response": []
				}
			]
		},
		{
			"name": "Topics",
			"item": [
				{
					"name": "Create Topic",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"announcements\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/v1/topics",
							"host": ["{{baseUrl}}"],
							"path": ["v1", "topics"]
						},
						"description": "Create a new topic"
					},
					"response": []
				},
				{
					"name": "List Topics",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/v1/topics",
							"host": ["{{baseUrl}}"],
							"path": ["v1", "topics"]
						},
						"description": "List all topics"
					},
					"response": []
				},
				{
					"name": "Get Topic by ID",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/v1/topics/{{topicID}}",
							"host": ["{{baseUrl}}"],
							"path": ["v1", "topics", "{{topicID}}"]
						},
						"description": "Get a topic by ID"
					},
					"response": []
				},
				{
					"name": "Delete Topic",
					"request": {
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/v1/topics/{{topicID}}",
							"host": ["{{baseUrl}}"],
							"path": ["v1", "topics", "{{topicID}}"]
						},
						"description": "Delete a topic"
					},
					"response": []
				}
			]
		},
		{
			"name": "Subscriptions",
			"item": [
				{
					"name": "Subscribe User to Topic",
					"request": {
						"method": "POST",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/v1/users/{{userID}}/subscriptions/{{topicID}}",
							"host": ["{{baseUrl}}"],
							"path": ["v1", "users", "{{userID}}", "subscriptions", "{{topicID}}"]
						},
						"description": "Subscribe a user to a topic"
					},
					"response": []
				},
				{
					"name": "Unsubscribe User from Topic",
					"request": {
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/v1/users/{{userID}}/subscriptions/{{topicID}}",
							"host": ["{{baseUrl}}"],
							"path": ["v1", "users", "{{userID}}", "subscriptions", "{{topicID}}"]
						},
						"description": "Unsubscribe a user from a topic"
					},
					"response": []
				},
				{
					"name": "Get User Subscriptions",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/v1/users/{{userID}}/subscriptions",
							"host": ["{{baseUrl}}"],
							"path": ["v1", "users", "{{userID}}", "subscriptions"]
						},
						"description": "Get all topic subscriptions for a user"
					},
					"response": []
				}
			]
		},
		{
			"name": "Notifications",
			"item": [
				{
					"name": "Send to User (basic)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"title\": \"Direct Message\",\n    \"body\": \"This notification is sent directly to all your devices.\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/v1/users/{{userID}}/send",
							"host": ["{{baseUrl}}"],
							"path": ["v1", "users", "{{userID}}", "send"]
						},
						"description": "Queue a basic notification to be sent to all of a user's devices. Returns {\"status\": \"queued\", \"job_id\": \"...\"} immediately."
					},
					"response": []
				},
				{
					"name": "Send to User (rich notification)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"title\": \"Order Shipped! ðŸ“¦\",\n    \"body\": \"Your order #12345 is on the way\",\n    \"image_url\": \"https://example.com/shipped.png\",\n    \"sound\": \"default\",\n    \"badge\": 1,\n    \"data\": {\n        \"order_id\": \"12345\",\n        \"deep_link\": \"/orders/12345\"\n    },\n    \"collapse_id\": \"order-12345-status\",\n    \"thread_id\": \"order-12345\",\n    \"priority\": \"high\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/v1/users/{{userID}}/send",
							"host": ["{{baseUrl}}"],
							"path": ["v1", "users", "{{userID}}", "send"]
						},
						"description": "Send a rich notification with image, sound, badge, custom data, and grouping options.\n\nAvailable fields:\n- title, body: Required (unless silent)\n- image_url: URL to image (FCM native, APNs via mutable-content)\n- sound: \"default\" or custom sound filename\n- badge: App icon badge number (null = don't change, 0 = clear)\n- data: Custom key-value data passed to app\n- silent: true for background/silent notification\n- collapse_id: Replace previous notification with same ID\n- priority: \"high\" (default) or \"normal\"\n- ttl: Seconds until notification expires\n- thread_id: Group related notifications\n- category: Actionable notification category"
					},
					"response": []
				},
				{
					"name": "Send to User (silent/background)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"title\": \"\",\n    \"body\": \"\",\n    \"silent\": true,\n    \"data\": {\n        \"action\": \"sync_messages\",\n        \"conversation_id\": \"abc123\"\n    }\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/v1/users/{{userID}}/send",
							"host": ["{{baseUrl}}"],
							"path": ["v1", "users", "{{userID}}", "send"]
						},
						"description": "Send a silent/background notification to trigger app-side data sync without showing a visible notification."
					},
					"response": []
				},
				{
					"name": "Publish to Topic (basic)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"title\": \"New Announcement\",\n    \"body\": \"This is a broadcast message to all subscribers of this topic.\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/v1/topics/{{topicID}}/publish",
							"host": ["{{baseUrl}}"],
							"path": ["v1", "topics", "{{topicID}}", "publish"]
						},
						"description": "Queue a basic notification to be published to all users subscribed to a topic. Returns {\"status\": \"queued\", \"job_id\": \"...\"} immediately."
					},
					"response": []
				},
				{
					"name": "Publish to Topic (rich notification)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"title\": \"ðŸŽ‰ Flash Sale!\",\n    \"body\": \"50% off all items for the next 2 hours\",\n    \"image_url\": \"https://example.com/sale-banner.jpg\",\n    \"sound\": \"default\",\n    \"data\": {\n        \"sale_id\": \"flash-2024\",\n        \"deep_link\": \"/sales/flash-2024\"\n    },\n    \"collapse_id\": \"sale-notification\",\n    \"priority\": \"high\",\n    \"ttl\": 7200\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/v1/topics/{{topicID}}/publish",
							"host": ["{{baseUrl}}"],
							"path": ["v1", "topics", "{{topicID}}", "publish"]
						},
						"description": "Publish a rich notification with image, custom data, and time-to-live to all topic subscribers."
					},
					"response": []
				},
				{
					"name": "Get Publish Job Status",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/v1/topics/{{topicID}}/publish/{{jobID}}",
							"host": ["{{baseUrl}}"],
							"path": ["v1", "topics", "{{topicID}}", "publish", "{{jobID}}"]
						},
						"description": "Get the status of a publish job.\n\nStatus values:\n- QUEUED: Job is waiting to be processed\n- IN_PROGRESS: Job is currently being processed\n- COMPLETED: Job finished processing\n\nAlso returns total_count, success_count, failure_count for delivery stats."
					},
					"response": []
				}
			]
		}
	]
}


